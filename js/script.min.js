var asteroids=[],rocksLrg=["M 26.087899,1.0434852 49.503787,26.009091 74.220561,2.6541843 96.335572,25.203747 85.278067,50.974686 98.286898,75.940275 62.512619,99.295186 26.087905,100.10053 0.7206885,77.55096 1.3711312,27.619771 Z","M 27.46638,2.6445482 66.467442,0.98983643 99.048213,24.999426 V 35.822504 L 65.202598,51.325844 98.421452,73.55696 76.484471,97.835645 H 72.723845 L 60.501821,85.842551 27.596351,98.713169 0.95859607,63.02645 1.8987487,25.29194 H 36.997914 Z","M 14.670645,48.844427 1.9670478,25.614646 27.37424,2.3848478 48.335078,12.875719 73.107033,1.6354928 97.878992,24.865291 75.012591,39.102909 97.878992,60.834007 75.012591,97.552066 39.442599,87.061197 26.739004,99.050766 1.3318868,75.820971 Z"];for(xLimit=resetWindowLimit("x")-1,yLimit=resetWindowLimit("y")-1,mode="asteroids",rockCnt=10,delta_time=20,turn=0,thrust=0,turn_per_milli=.1,thrust_per_milli=5e-5,key_delay=50,spaceship=new Spaceship(xLimit/2,yLimit/2,0,0,0,0,0,0),colors=["#edc951","#eb6841","#cc2a36","#4f372d","#00a0b0"],i=0;i<rockCnt;i++)thisRockSize=Math.floor(getRandomFloat(50,100)),thisRockSize=100,asteroids.push(new Asteroid(i,"test",thisRockSize,thisRockSize,getRandomFloat(0,xLimit-150),getRandomFloat(0,yLimit-150),getRandomFloat(-5,5),getRandomFloat(-5,5),colors[Math.floor(getRandomFloat(0,5))],"generic",!1));function resetWindowLimit(t){var s,e,o;if(e=window.innerHeight,o=window.innerHeight,"x"==t)for(s=window.innerWidth,i=0;i<asteroids.length;i++)asteroids[i].xcord>=e-asteroids[i].width&&asteroids[i].changePosition(e-asteroids[i].width,o-asteroids[i].height);else for(s=window.innerHeight,i=0;i<asteroids.length;i++)asteroids[i].ycord>=o-asteroids[i].height&&asteroids[i].changePosition(e-asteroids[i].width,s-asteroids[i].height);return s}function animateScreen(i){var t=i;for(var s in t){if(t.hasOwnProperty(s))t[s].changePosition(t[s].xcord+t[s].xvel,t[s].ycord+t[s].yvel),"asteroids"==mode&&((t[s].xcord<=0-t[s].width||t[s].xcord>=xLimit+t[s].width)&&(t[s].xcord>=xLimit+t[s].width?t[s].xcord=-Math.abs(0-t[s].width):t[s].xcord=xLimit+t[s].width),(t[s].ycord<=0-t[s].width||t[s].ycord>=yLimit+t[s].height)&&(t[s].ycord>=yLimit+t[s].height?t[s].ycord=-Math.abs(0-t[s].height):t[s].ycord=yLimit+t[s].height));$("#rockAnim"+t[s].id).css("left",t[s].xcord).css("top",t[s].ycord)}!function(i){var t=Math.PI/180;if(0!=turn&&(spaceship.theta=spaceship.theta+turn*turn_per_milli*i),0!=thrust){console.log("thrusting");var s=thrust*thrust_per_milli*i,e=s*Math.cos(spaceship.theta*t),o=s*Math.sin(spaceship.theta*t)}else e=0,o=0;spaceship.vx=spaceship.vx+e,spaceship.vy=spaceship.vy+o}(delta_time),function(i){spaceship.theta+=spaceship.yaw*i,spaceship.x+=spaceship.vx*i,spaceship.y+=spaceship.vy*i,console.log("turn",spaceship.turn,spaceship.x,spaceship.y),$("#spaceship").css("left",spaceship.x).css("top",spaceship.y)}(delta_time)}function getRandomFloat(i,t){return Math.random()*(t-i)+i}var _this=spaceship;function Asteroid(i,t,s,e,o,r,h,a,d,c,n){this.id=i,this.title=t,this.width=s,this.height=e,this.xcord=o,this.ycord=r,this.xvel=h,this.yvel=a,this.color=d,this.type=c,this.oob=n,this.gravity=.1,this.gravitySpeed=0,this.bounce=.4,this.resetGravity=function(){},this.newPos=function(){this.gravitySpeed+=this.gravity,this.xcord+=this.xvel;var i=this.yvel;this.yvel<0&&(i=0),i=0,this.ycord+=i+this.gravitySpeed,this.hitBottom()},this.hitBottom=function(){var i=window.innerHeight-this.height;this.ycord>i&&(this.ycord=i,this.gravitySpeed=-this.gravitySpeed*this.bounce),this.xcord>window.innerWidth+this.width&&(this.xcord=0-this.width),this.xcord<0-this.width&&(this.xcord=window.innerWidth+this.width)},this.changeColor=function(i){this.color=i},this.oob=function(i){this.oob=i},this.changeVelocity=function(i,t){"x"==i&&(this.xvel=t),"y"==i&&(this.yvel=t)},this.changePosition=function(i,t){this.xcord=i,this.ycord=t},this.getVelocity=function(i){return this.direction}}function Spaceship(i,t,s,e,o,r,h,a){this.x=i,this.y=t,this.vx=s,this.vy=e,this.theta=o,this.yaw=r,this.x_points=h,this.y_points=a,this.shape="M 6.0055459,0.26400664 0.13363476,14.295661 l 5.87191114,-2.40543 5.4202261,2.40543 z"}this.thrust=0,this.turn=0,window.onkeydown=function(i){switch(i.keyCode){case 68:turn=1,console.log("left");break;case 65:turn=-1,console.log("right");break;case 87:thrust=1,console.log("forward");break;case 83:thrust=-1,console.log("backward");break;case 32:console.log("Pew, pew pew!")}},window.onkeyup=function(i){switch(i.keyCode){case 65:case 68:turn=0;break;case 87:case 83:thrust=0}},$(document).ready(function(){for(var i in asteroids)asteroids.hasOwnProperty(i)&&($("body").append("<svg id='rockAnim"+asteroids[i].id+"' data-id='"+asteroids[i].id+"' class='clicker'><path cx='"+asteroids[i].width+"' cy='"+asteroids[i].height+"' r='"+(asteroids[i].width/2-5)+"' stroke='"+asteroids[i].color+"' stroke-width='2' d='"+rocksLrg[Math.floor(getRandomFloat(0,3))]+"'  id='path81' /><text x='20' y='50' fill='"+asteroids[i].color+"'>"+asteroids[i].id+"</text></svg>"),$("#rockAnim"+asteroids[i].id).css("color",asteroids[i].color).css("border-color",asteroids[i].color).css("width",asteroids[i].width).css("height",asteroids[i].height).addClass("rockAnim"));$("body").append("<svg id='spaceship' class=''><path cx='50' cy='50' r='50' stroke='#ffffff' stroke-width='2' d='"+spaceship.shape+"'  id='outerSHip' /></svg>"),$(".cntrlButton").click(function(){if(console.log($(this).data("mode")),mode=$(this).data("mode"),"asteroids"==mode)for(var i in asteroids)(asteroids[i].xcord<=0||asteroids[i].xcord>=xLimit-asteroids[i].width||asteroids[i].ycord<=0||asteroids[i].ycord>=yLimit-asteroids[i].height)&&(asteroids[i].oob=!0);if("gravity"==mode)for(var i in asteroids)asteroids[i].resetGravity();"stop"==mode&&(console.log("here"),clearInterval("startBubbletron"))}),$(".clicker").click(function(){var i=$(this).data("id");console.log(asteroids[i].id+": "+asteroids[i].xvel+" - "+asteroids[i].yvel)});setInterval(function(){animateScreen(asteroids)},delta_time)}),$(window).resize(function(){xLimit=resetWindowLimit("x"),yLimit=resetWindowLimit("y")});