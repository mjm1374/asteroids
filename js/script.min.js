var asteroids=[],sndEfx=["thrust.mp3"],sndPlayer=document.getElementById("sndPlayer"),rocksLrg=["M 26.087899,1.0434852 49.503787,26.009091 74.220561,2.6541843 96.335572,25.203747 85.278067,50.974686 98.286898,75.940275 62.512619,99.295186 26.087905,100.10053 0.7206885,77.55096 1.3711312,27.619771 Z","M 27.46638,2.6445482 66.467442,0.98983643 99.048213,24.999426 V 35.822504 L 65.202598,51.325844 98.421452,73.55696 76.484471,97.835645 H 72.723845 L 60.501821,85.842551 27.596351,98.713169 0.95859607,63.02645 1.8987487,25.29194 H 36.997914 Z","M 14.670645,48.844427 1.9670478,25.614646 27.37424,2.3848478 48.335078,12.875719 73.107033,1.6354928 97.878992,24.865291 75.012591,39.102909 97.878992,60.834007 75.012591,97.552066 39.442599,87.061197 26.739004,99.050766 1.3318868,75.820971 Z"];for(xLimit=resetWindowLimit("x")-1,yLimit=resetWindowLimit("y")-1,mode="asteroids",rockCnt=10,delta_time=20,turn=0,thrust=0,turn_per_milli=.1,thrust_per_milli=15e-5,key_delay=50,spaceship=new Spaceship(xLimit/2,yLimit/2,0,0,0,0,0,0),colors=["#edc951","#eb6841","#cc2a36","#4f372d","#00a0b0"],i=0;i<rockCnt;i++)thisRockSize=Math.floor(getRandomFloat(50,100)),thisRockSize=100,asteroids.push(new Asteroid(i,"test",thisRockSize,thisRockSize,getRandomFloat(0,xLimit-150),getRandomFloat(0,yLimit-150),getRandomFloat(-3,3),getRandomFloat(-3,3),colors[Math.floor(getRandomFloat(0,5))],"generic",!1));function resetWindowLimit(t){var s,e,o;if(e=window.innerHeight,o=window.innerHeight,"x"==t)for(s=window.innerWidth,i=0;i<asteroids.length;i++)asteroids[i].xcord>=e-asteroids[i].width&&asteroids[i].changePosition(e-asteroids[i].width,o-asteroids[i].height);else for(s=window.innerHeight,i=0;i<asteroids.length;i++)asteroids[i].ycord>=o-asteroids[i].height&&asteroids[i].changePosition(e-asteroids[i].width,s-asteroids[i].height);return s}function animateScreen(t){var i=t;for(var s in i){if(i.hasOwnProperty(s))i[s].changePosition(i[s].xcord+i[s].xvel,i[s].ycord+i[s].yvel),"asteroids"==mode&&((i[s].xcord<=0-i[s].width||i[s].xcord>=xLimit+i[s].width)&&(i[s].xcord>=xLimit+i[s].width?i[s].xcord=-Math.abs(0-i[s].width):i[s].xcord=xLimit+i[s].width),(i[s].ycord<=0-i[s].width||i[s].ycord>=yLimit+i[s].height)&&(i[s].ycord>=yLimit+i[s].height?i[s].ycord=-Math.abs(0-i[s].height):i[s].ycord=yLimit+i[s].height));$("#rockAnim"+i[s].id).css("left",i[s].xcord).css("top",i[s].ycord)}!function(t){var i=Math.PI/180;if(0!=turn&&void 0!=turn?(spaceship.theta=spaceship.theta+turn*turn_per_milli*t,$("#sndTurn").get(0).play()):($("#sndTurn").get(0).pause(),$("#sndTurn").get(0).currentTime=0),0!=thrust&&void 0!=thrust){var s=thrust*thrust_per_milli*t,e=s*Math.cos(spaceship.theta*i),o=s*Math.sin(spaceship.theta*i);$("#sndPlayer").get(0).play()}else e=0,o=0,$("#sndPlayer").get(0).pause(),$("#sndPlayer").get(0).currentTime=0;spaceship.vx=spaceship.vx+e,spaceship.vy=spaceship.vy+o}(delta_time),function(t){spaceship.x>=xLimit&&(spaceship.x=0),spaceship.x<0&&(spaceship.x=xLimit),spaceship.y>=yLimit&&(spaceship.y=0),spaceship.y<0&&(spaceship.y=yLimit),spaceship.theta+=spaceship.yaw*t,spaceship.x+=spaceship.vx*t,spaceship.y+=spaceship.vy*t,$("#spaceship").css("left",spaceship.x).css("top",spaceship.y).css({transform:"rotate("+spaceship.theta+"deg)"})}(delta_time)}function getRandomFloat(t,i){return Math.random()*(i-t)+t}function Asteroid(t,i,s,e,o,r,a,h,c,d,n){this.id=t,this.title=i,this.width=s,this.height=e,this.xcord=o,this.ycord=r,this.xvel=a,this.yvel=h,this.color=c,this.type=d,this.oob=n,this.gravity=.1,this.gravitySpeed=0,this.bounce=.4,this.resetGravity=function(){},this.newPos=function(){this.gravitySpeed+=this.gravity,this.xcord+=this.xvel;var t=this.yvel;this.yvel<0&&(t=0),t=0,this.ycord+=t+this.gravitySpeed,this.hitBottom()},this.hitBottom=function(){var t=window.innerHeight-this.height;this.ycord>t&&(this.ycord=t,this.gravitySpeed=-this.gravitySpeed*this.bounce),this.xcord>window.innerWidth+this.width&&(this.xcord=0-this.width),this.xcord<0-this.width&&(this.xcord=window.innerWidth+this.width)},this.changeColor=function(t){this.color=t},this.oob=function(t){this.oob=t},this.changeVelocity=function(t,i){"x"==t&&(this.xvel=i),"y"==t&&(this.yvel=i)},this.changePosition=function(t,i){this.xcord=t,this.ycord=i},this.getVelocity=function(t){return this.direction}}function Spaceship(t,i,s,e,o,r,a,h){this.x=t,this.y=i,this.vx=s,this.vy=e,this.theta=o,this.yaw=r,this.x_points=a,this.y_points=h,this.shape="M 14.383032,5.9181762 0.35137621,0.04626516 2.7568063,5.9181762 0.35137621,11.338401 Z"}document.onkeydown=function(t){switch(t.keyCode){case 68:turn=1;break;case 65:turn=-1;break;case 87:thrust=1;break;case 83:thrust=-1;break;case 32:$("#sndLaser").get(0).play(),console.log("Pew, pew pew!")}},document.onkeyup=function(t){switch(t.keyCode){case 65:case 68:turn=0;break;case 87:case 83:thrust=0;break;case 32:$("#sndLaser").get(0).pause(),$("#sndLaser").get(0).currentTime=0}},$(document).on("touchstart",".gameBtn, .glyphicon",function(t){t.preventDefault();var i=t.target.id;switch(console.log(i),i){case"btnLeft":turn=-1;break;case"btnRight":turn=1;break;case"btnUp":thrust=1;break;case"btnDown":thrust=-1;break;case"glyphLeft":turn=-1;break;case"glyphRight":turn=1;break;case"glyphUp":thrust=1;break;case"glyphDown":thrust=-1;break;case 32:$("#sndLaser").get(0).play(),console.log("Pew, pew pew!")}}),$(document).on("touchend",".gameBtn, .glyphicon",function(t){switch(t.target.id){case"btnLeft":case"btnRight":turn=0;break;case"btnUp":case"btnDown":thrust=0;break;case"glyphLeft":case"glyphRight":turn=0;break;case"glyphUp":case"glyphDown":thrust=0;break;case 32:$("#sndLaser").get(0).play(),console.log("Pew, pew pew!")}}),$(document).ready(function(){for(var t in asteroids)asteroids.hasOwnProperty(t)&&($("body").append("<svg id='rockAnim"+asteroids[t].id+"' data-id='"+asteroids[t].id+"' class='clicker'><path cx='"+asteroids[t].width+"' cy='"+asteroids[t].height+"' r='"+(asteroids[t].width/2-5)+"' stroke='"+asteroids[t].color+"' stroke-width='2' d='"+rocksLrg[Math.floor(getRandomFloat(0,3))]+"'  id='path81' /><text x='20' y='50' fill='"+asteroids[t].color+"'>"+asteroids[t].id+"</text></svg>"),$("#rockAnim"+asteroids[t].id).css("color",asteroids[t].color).css("border-color",asteroids[t].color).css("width",asteroids[t].width).css("height",asteroids[t].height).addClass("rockAnim"));$("body").append("<svg id='spaceship' class=''><path cx='5' cy='5' r='10' stroke='#ffffff' stroke-width='2' d='"+spaceship.shape+"'  id='outerShip' /></svg>"),$("#welcomeModel").modal("show"),$(".cntrlButton").click(function(){if(mode=$(this).data("mode"),"asteroids"==mode)for(var t in asteroids)(asteroids[t].xcord<=0||asteroids[t].xcord>=xLimit-asteroids[t].width||asteroids[t].ycord<=0||asteroids[t].ycord>=yLimit-asteroids[t].height)&&(asteroids[t].oob=!0)}),$(".clicker").click(function(){var t=$(this).data("id");console.log(asteroids[t].id+": "+asteroids[t].xvel+" - "+asteroids[t].yvel)});setInterval(function(){animateScreen(asteroids)},delta_time)}),$(window).resize(function(){xLimit=resetWindowLimit("x"),yLimit=resetWindowLimit("y")});