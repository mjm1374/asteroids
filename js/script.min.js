"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),e}var Asteroid=function(){function e(t,s,o,i,a,n,r,c,u,h,d,l){_classCallCheck(this,e),this.id=t,this.title=s,this.width=o,this.height=i,this.x=a,this.y=n,this.xv=r,this.yv=c,this.color=u,this.type=h,this.oob=d,this.points=l,this.gravity=.1,this.gravitySpeed=0,this.bounce=.4}return _createClass(e,[{key:"resetGravity",value:function(){}},{key:"newPos",value:function(){this.gravitySpeed+=this.gravity,this.x+=this.xvel;var e=this.yv;this.yv<0&&(e=0),e=0,this.y+=e+this.gravitySpeed,this.hitBottom()}},{key:"hitBottom",value:function(){var e=window.innerHeight-this.height;this.y>e&&(this.x=e,this.gravitySpeed=-this.gravitySpeed*this.bounce),this.x>window.innerWidth+this.width&&(this.x=0-this.width),this.x<0-this.width&&(this.x=window.innerWidth+this.width)}},{key:"changeColor",value:function(e){this.color=e}},{key:"oob",value:function(e){this.oob=e}},{key:"changeVelocity",value:function(e,t){"x"==e&&(this.xv=t),"y"==e&&(this.yv=t)}},{key:"changePosition",value:function(e,t){this.x=e,this.y=t}},{key:"getVelocity",value:function(e){return this.direction}},{key:"changeExistance",value:function(e){this.exists=e}}]),e}();Asteroid.colors=["#edc951","#eb6841","#cc2a36","#4f372d","#00a0b0"],Asteroid.rocksLrg=["26.087899,1.0434852 49.503787,26.009091 74.220561,2.6541843 96.335572,25.203747 85.278067,50.974686 98.286898,75.940275 62.512619,99.295186 26.087905,100.10053 0.7206885,77.55096 1.3711312,27.619771","27.46638,2.6445482 66.467442,0.98983643 99.048213,24.999426 V 35.822504 L 65.202598,51.325844 98.421452,73.55696 76.484471,97.835645 H 72.723845 L 60.501821,85.842551 27.596351,98.713169 0.95859607,63.02645 1.8987487,25.29194 H 36.997914","14.670645,48.844427 1.9670478,25.614646 27.37424,2.3848478 48.335078,12.875719 73.107033,1.6354928 97.878992,24.865291 75.012591,39.102909 97.878992,60.834007 75.012591,97.552066 39.442599,87.061197 26.739004,99.050766 1.3318868,75.820971"];var Spaceship=function e(t,s,o,i,a,n,r,c){_classCallCheck(this,e),this.x=t,this.y=s,this.vx=o,this.vy=i,this.theta=a,this.width=14,this.height=10,this.yaw=n,this.x_points=r,this.y_points=c,this.shape=e.shape};Spaceship.shape="14.383032,5.9181762 0.35137621,0.04626516 2.7568063,5.9181762 0.35137621,11.338401";var Shot=function(){function e(t,s,o,i,a,n,r,c,u,h){_classCallCheck(this,e),this.id=t,this.x=s,this.y=o,this.vx=i,this.vy=a,this.theta=n,this.width=6,this.height=6,this.yaw=r,this.life=c,this.x_points=u,this.y_points=h}return _createClass(e,[{key:"changePosition",value:function(e,t){this.x=e,this.y=t}},{key:"changeLife",value:function(e){this.life=e}}]),e}(),Sound=function(){function e(t){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,e),this.sound=document.createElement("audio"),this.sound.src=t,this.sound.setAttribute("preload","auto"),this.sound.setAttribute("controls","none"),!0===s&&this.sound.setAttribute("loop",s),this.sound.style.display="none",document.body.appendChild(this.sound)}return _createClass(e,[{key:"play",value:function(){this.sound.play()}},{key:"stop",value:function(){this.sound.pause()}},{key:"reset",value:function(){this.sound.currentTime=0}},{key:"loop",value:function(){this.sound.setAttribute("loop",!0)}},{key:"unloop",value:function(){this.sound.removeAttribute("loop")}},{key:"cycle",value:function(){this.sound.pause(),this.sound.currentTime=0,this.sound.play()}}]),e}(),Ufo=function(){function e(t,s,o,i,a,n,r){_classCallCheck(this,e),this.x=t,this.y=s,this.vx=o,this.vy=i,this.theta=a,this.width=52,this.height=42,this.yaw=n,this.points=r}return _createClass(e,[{key:"changePosition",value:function(e,t){this.x=e,this.y=t}}]),e}();Ufo.shape="466.697 275.189, 350.500 226.628, 329.099 170.984, 294.919 147.509, 242.500 147.509, 242.500 112.989, 235.000 105.489, 227.500 112.989, 227.500 147.509, 175.081 147.509, 140.901 170.984, 119.500 226.628, 3.303 275.189, 0.000 281.405, 3.303 287.621, 106.027 332.782, 143.504 364.510, 326.496 364.510, 363.973 332.782, 466.697 287.621, 470.000 281.405, 466.697 275.189";var SpawnBox=function e(t,s){_classCallCheck(this,e),this.x=t,this.y=s,this.width=100,this.height=100},version=1.32,delta_time=20,lifeStart=3,jumpStart=3,newLifeTarget=1e4,rockID=0,mode="asteroids",modal=document.getElementById("welcomeModel"),modalDialog=document.querySelector(".modal-dialog"),dialogCloseBtn=document.querySelector(".dialogCloseBtn"),asteroids=[],shots=[],shotCnt=0,xLimit=resetWindowLimit("x")-1,yLimit=resetWindowLimit("y")-1,spaceship=new Spaceship(xLimit/2,yLimit/2,0,0,0,0,0,0),spawnBox=new SpawnBox(xLimit/2-50,yLimit/2-50),lifeCnt=lifeStart,jumpCnt=jumpStart,score=0,newLife=newLifeTarget,resetGun=!0,inPlay=!1,rockCnt=10,scale=1,ufo=new Ufo(-100,-100,0,0,0,0,200),nextEnemy=Math.floor(1e3*getRandomFloat(10,30)),enemyDelay=2e3,enemyUFO=[],ufoShots=[],ufoShotCnt=0,ufoActive=!1,ufoShootingSpeed=1e3,ufoAimStart=50,ufoAim=50,ufoScale=.1,ufoMaxSpeed=3,ufoMinSpeed=1,ufoSizeVar=10,ufoTimer=null,turn=0,thrust=0,turn_per_milli=.1,thrust_per_milli=15e-5,key_delay=50,del_v=0,del_vx=0,del_vy=0,rock_max_v=1.5,rock_max_v_cap=6,screenScale=1,scoreNum=null,versionNum=null,lifeNum=null,HSNum=null,ufoSnd=null,extraLifeSnd=null,ufoBoomSnd=null,ufoBulletSnd=null,shootSnd=null,thrustSnd=null,turnSnd=null,hyperspaceSnd=null,hyperspaceFailSnd=null,boomSnd=null,astroBoom100Snd=null,astroBoom50Snd=null,astroBoom25Snd=null,saucerBigSnd=null,saucerSmallSnd=null,beat1Snd=null,beat2Snd=null,spaceshipSvg=null,gameWrapper=null,gameOverBoard=null,startover=null,isMobile=!1,beatCnt=1e3,firstRun=!0,heartbeat=null,soundless=!1,randomBG=!1;function animateScreen(){hideCursor(),updateAsteroids(),checkUFO(),updateShots(),updateUFOShot(),moveSpaceship(delta_time),updateSpaceship(delta_time),updateScoreCard()}function updateScoreCard(){scoreNum.innerText=score,lifeNum.innerText=lifeCnt,HSNum.innerText=jumpCnt}function updateAsteroids(){for(var e in asteroids){if(asteroids.hasOwnProperty(e))asteroids[e].changePosition(asteroids[e].x+asteroids[e].xv,asteroids[e].y+asteroids[e].yv),"asteroids"==mode&&((asteroids[e].x<=0-asteroids[e].width||asteroids[e].x>=xLimit+asteroids[e].width)&&(asteroids[e].x>=xLimit+asteroids[e].width?asteroids[e].x=-Math.abs(0-asteroids[e].width):asteroids[e].x=xLimit+asteroids[e].width),(asteroids[e].y<=0-asteroids[e].width||asteroids[e].y>=yLimit+asteroids[e].height)&&(asteroids[e].y>=yLimit+asteroids[e].height?asteroids[e].y=-Math.abs(0-asteroids[e].height):asteroids[e].y=yLimit+asteroids[e].height)),1==inPlay&&inCollision(asteroids[e])&&boom();moveItem(document.getElementById("rockAnim"+asteroids[e].id),asteroids[e].x,asteroids[e].y)}}function checkUFO(){null!=ufo&&null!=ufo&&1==ufoActive&&(ufo.changePosition(ufo.x+ufo.vx,ufo.y+ufo.vy),ufo.x>xLimit+100&&(parkUfo(),spawnEnemy()),ufo.x<-60&&ufo.x>-199&&(parkUfo(),spawnEnemy()),moveItem(document.getElementById("ufoShip"),ufo.x,ufo.y))}function updateShots(){for(var e in shots){var t=10*Math.cos(shots[e].theta*Math.PI/180)+shots[e].x,s=10*Math.sin(shots[e].theta*Math.PI/180)+shots[e].y,o=shots[e].life-5;if(shots[e].changeLife(o),shots[e].life<0)clearBullet("sp",e);else shots[e].changePosition(t,s),moveItem(document.getElementById("spaceshipShot".concat(shots[e].id)),shots[e].x,shots[e].y),isHit(shots[e])?clearBullet("sp",e):isUfoHit(shots[e])&&clearBullet("sp",e)}}function updateUFOShot(){for(var e in ufoShots){var t=10*Math.cos(ufoShots[e].theta*Math.PI/180)+ufoShots[e].x,s=10*Math.sin(ufoShots[e].theta*Math.PI/180)+ufoShots[e].y,o=ufoShots[e].life-5;if(ufoShots[e].changeLife(o),ufoShots[e].life<0)clearBullet("ufo",e);else ufoShots[e].changePosition(t,s),moveItem(document.getElementById("ufoshot"+ufoShots[e].id),ufoShots[e].x,ufoShots[e].y),isSpaceshipHit(ufoShots[e])&&clearBullet("ufo",e)}}function regenerateAsteroids(){scale=1,beatCnt=1e3,clearInterval(heartbeat),(rock_max_v+=.25)>=rock_max_v_cap&&(rock_max_v=rock_max_v_cap);for(var e=0;e<rockCnt;e++){rockID++;asteroids.push(new Asteroid(rockID,"asteroid"+e,100/screenScale,100/screenScale,getSafeRandomFloat(0,xLimit-150),getSafeRandomFloat(0,yLimit-150),getRandomFloat(-Math.abs(rock_max_v),rock_max_v),getRandomFloat(-Math.abs(rock_max_v),rock_max_v),Asteroid.colors[Math.floor(getRandomFloat(0,5))],"generic",!1,20))}for(var t in asteroids)asteroids.hasOwnProperty(t)&&makeRock(asteroids[t].id,asteroids[t].width,asteroids[t].height,asteroids[t].color,scale,Asteroid.rocksLrg[Math.floor(getRandomFloat(0,3))])}function makeRock(e,t,s,o,i,a){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id","rockAnim".concat(e)),n.setAttribute("data-id",e),n.setAttribute("aria-hidden","true"),n.style.cssText="color:".concat(o,", border-color:").concat(o),n.setAttribute("class","asteroid rockAnim"),n.classList.add("rock".concat(100*i));var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("fill-rule","evenodd"),r.setAttribute("d","M".concat(a," Z")),r.setAttribute("stroke",o),r.setAttribute("stroke-width",2),r.setAttribute("cx",t),r.setAttribute("cy",s),r.setAttribute("r",10),r.setAttribute("transform","scale(".concat(i,", ").concat(i,")")),n.appendChild(r),document.body.appendChild(n)}function makeAsteroidPieces(e,t,s,o){for(var i=0;i<o;i++){rockID++;var a=rock_max_v,n=20;switch(s){case 100:scale="1",a=rock_max_v,n=20;break;case 50:scale=".5",a=rock_max_v+1,n=50;break;case 25:scale=".25",a=rock_max_v+2,n=100}asteroids.push(new Asteroid(rockID,"test",s,s,e,t,getRandomFloat(-Math.abs(a),a),getRandomFloat(-Math.abs(a),a),Asteroid.colors[Math.floor(getRandomFloat(0,5))],"generic",!1,n)),makeRock(asteroids[asteroids.length-1].id,asteroids[asteroids.length-1].width,asteroids[asteroids.length-1].height,asteroids[asteroids.length-1].color,scale,Asteroid.rocksLrg[Math.floor(getRandomFloat(0,3))])}}function blowupAsteroid(e,t,s){switch(e.width){case 100:astroBoom100Snd.cycle();break;case 50:astroBoom50Snd.cycle();break;case 25:astroBoom25Snd.cycle()}pointCnt(e.points),heartBeatSnd(beatCnt-=12),e.height>25&&makeAsteroidPieces(e.x,e.y,e.height/2,2),clearDomItem("rockAnim"+e.id),clearDomItem("shot"+s),asteroids.splice(t,1),0==asteroids.length&&regenerateAsteroids()}function inCollision(e){return!badTouch(spaceship,e)}function isHit(e){for(var t=asteroids,s=e,o=0;o<t.length;o++)if(0==badTouch(t[o],s))return blowupAsteroid(t[o],o,s.id),!0}function isSpaceshipHit(e){var t=e;if(0==badTouch(spaceship,t))return boom(t.id),ufoActive=!1,!0}function isUfoHit(e){var t=ufo,s=e;if(0==badTouch(t,s))return blowupUfo(t,s.id),ufoActive=!1,!0}function badTouch(e,t){return e.y+e.height<t.y||e.y>t.y+t.height||e.x+e.width<t.x||e.x>t.x+t.width}function pewpew(){lifeCnt>0&&1==resetGun&&1==inPlay&&(shootSnd.play(),makeShot(),resetGun=!1)}function makeShot(){shotCnt++,shots.push(new Shot(shotCnt,spaceship.x+spaceship.width/2,spaceship.y+spaceship.height/2,spaceship.vx,spaceship.vy,spaceship.theta,spaceship.yaw,1800,0,0)),makeshotSVG(shotCnt,"spaceshipShot","#f00")}function makeshotSVG(e,t,s){var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("id","".concat(t).concat(e)),o.setAttribute("data-id",e),o.setAttribute("class","".concat(t)),o.setAttribute("height",6),o.setAttribute("width",6);var i=document.createElementNS("http://www.w3.org/2000/svg","circle");i.setAttribute("cx",3),i.setAttribute("cy",3),i.setAttribute("r",10),i.setAttribute("stroke","#fff"),i.setAttribute("stroke-width",1),i.setAttribute("fill",s),o.appendChild(i),document.body.appendChild(o)}function clearBullet(e,t){"ufo"==e?(clearDomItem("ufoShip".concat(ufoShots[t].id)),ufoShots.splice(t,1)):(clearDomItem("spaceshipShot".concat(shots[t].id)),shots.splice(t,1))}function resetSpaceship(){if(spaceshipSvg=document.getElementById("spaceship"),lifeCnt>0){spaceshipSvg.style.cssText="display:block, opacity:.25",spaceship=new Spaceship(xLimit/2,yLimit/2,0,0,-90,0,0,0);var e=document.getElementById("spawn");for(e.style.left=spawnBox.x,e.style.top=spawnBox.y,e.style.height=spawnBox.height,e.style.width=spawnBox.width,parkUfo(),clearTimeout(ufoTimer),spawnEnemy();!1===safeSpawn();)inPlay=!1,animateScreen();inPlay=!0,spaceshipSvg.style.opacity="1"}else inPlay=!1,spaceshipSvg.style.display="none",gameOverBoard.classList.add("open"),clearInterval(heartbeat),checkHighScoreCookie()}function moveSpaceship(e){var t=Math.PI/180;0!=turn&&null!=turn?(spaceship.theta=spaceship.theta+turn*turn_per_milli*e,lifeCnt>0&&turnSnd.play()):(turnSnd.stop(),turnSnd.reset()),0!=thrust&&null!=thrust?(del_vx=(del_v=thrust*thrust_per_milli*e)*Math.cos(spaceship.theta*t),del_vy=del_v*Math.sin(spaceship.theta*t),lifeCnt>0&&thrustSnd.play()):(del_vx=0,del_vy=0,thrustSnd.stop()),spaceship.vx=spaceship.vx+del_vx,spaceship.vy=spaceship.vy+del_vy}function updateSpaceship(e){spaceship.x>=xLimit&&(spaceship.x=0),spaceship.x<0&&(spaceship.x=xLimit),spaceship.y>=yLimit&&(spaceship.y=0),spaceship.y<0&&(spaceship.y=yLimit),spaceship.theta+=spaceship.yaw*e,spaceship.x+=spaceship.vx*e,spaceship.y+=spaceship.vy*e,moveItem(spaceshipSvg,spaceship.x,spaceship.y,spaceship.theta)}function hyperspace(){lifeCnt>0&&1==inPlay&&(jumpCnt>0?(hyperspaceSnd.cycle(),spaceship.x=getRandomFloat(1,xLimit-5),spaceship.y=getRandomFloat(1,yLimit-5),spaceship.vx=0,spaceship.vy=0,jumpCnt--,HSNum.innerText=jumpCnt):hyperspaceFailSnd.play())}function boom(e){spaceshipSvg.style.display="none",inPlay=!1,ufoActive=!1,spaceship.x=-1e3,spaceship.y=-1e3,spaceship.vx=0,spaceship.vy=0,boomSnd.play(),clearDomItem("ufoshot".concat(e)),lifeCnt>0&&(lifeCnt--,setTimeout(function(){jumpCnt=3,resetSpaceship()},3e3))}function addSpaceship(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("id","spaceship");var t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("stroke","#fff"),t.setAttribute("stroke-width",2),t.setAttribute("d","M ".concat(spaceship.shape," Z")),t.setAttribute("id","outerShip"),e.appendChild(t),document.body.appendChild(e)}function spawnEnemy(){clearDomItem("ufoShip");var e=Math.floor(1e3*getRandomFloat(25,60));ufoTimer=setTimeout(function(){makeUFO(!0,.1)},e)}function makeUFO(e,t){ufoActive=e;var s=Math.random()<.5?-1:1;ufo.x=s>0?0-ufo.width:xLimit+ufo.width,ufoSizeVar=Math.pow(Math.floor(10*Math.random()),2),--ufoAim<0&&(ufoAim=0);var o=t;ufo.y=getRandomFloat(0,yLimit),ufo.vx=getRandomFloat(1,ufoMaxSpeed)*s,(ufoMaxSpeed+=.25)>10&&(ufoMaxSpeed=10),ufo.points=200,(ufoSizeVar>75||score>=1e5)&&(o=.06,ufo.vx=getRandomFloat(3,10)*s,ufoAim=0,ufo.points=1e3);var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("id","ufoShip"),i.setAttribute("class","ufo"),i.setAttribute("aria-hidden","true");var a=document.createElementNS("http://www.w3.org/2000/svg","polygon");a.setAttribute("fill-rule","evenodd"),a.setAttribute("points",Ufo.shape),a.setAttribute("stroke","#fff"),a.setAttribute("stroke-width",15),a.setAttribute("id","myPolygon"),a.setAttribute("transform","scale(".concat(o,", ").concat(o,")")),i.appendChild(a),document.body.appendChild(i),i.style.cssText="width: ".concat(ufo.width,", height: ").concat(ufo.height);var n=setInterval(function(){if(1==ufoActive&&1==inPlay){ufoShotCnt++;var e=180*Math.atan2(spaceship.y-ufo.y,spaceship.x-ufo.x)/Math.PI+getRandomFloat(-1*ufoAim,ufoAim);ufoShots.push(new Shot(ufoShotCnt,ufo.x,ufo.y,ufo.vx,ufo.vy,e,ufo.yaw,1800,0,0)),ufoBulletSnd.play(),.1==o?saucerBigSnd.play():saucerSmallSnd.play(),makeshotSVG(ufoShotCnt,"ufoshot","#0f0")}else clearInterval(n),.1==o?(saucerBigSnd.stop(),saucerBigSnd.reset()):(saucerSmallSnd.stop(),saucerSmallSnd.reset())},ufoShootingSpeed)}function blowupUfo(e,t){ufoBoomSnd.cycle(),clearDomItem("ufoShip"),clearDomItem("spaceshipShot"+t),pointCnt(e.points),parkUfo(),clearTimeout(ufoTimer),spawnEnemy()}function parkUfo(){clearDomItem("ufoShip"),ufoActive=!1,ufo.x=-200,ufo.y=-200,ufo.vx=0,ufo.vy=0,clearDomClass("ufoshot")}function resetWindowLimit(e){var t,s,o;if(s=window.innerHeight,o=window.innerHeight,"x"==e){t=window.innerWidth;for(var i=0;i<asteroids.length;i++)asteroids[i].x>=s-asteroids[i].width&&asteroids[i].changePosition(s-asteroids[i].width,o-asteroids[i].height)}else{t=window.innerHeight;for(var a=0;a<asteroids.length;a++)asteroids[a].y>=o-asteroids[a].height&&asteroids[a].changePosition(s-asteroids[a].width,t-asteroids[a].height)}return t}function getRandomFloat(e,t){return Math.random()*(t-e)+e}function getSafeRandomFloat(e,t){var s=e+t/2,o=0;return Math.random()*(t-e)+e>=s&&(o=t),o}function safeSpawn(){for(var e=asteroids,t=spawnBox,s=0;s<e.length;s++)if(0==(e[s].y+e[s].height<t.y||e[s].y>t.y+t.height||e[s].x+e[s].width<t.x||e[s].x>t.x+t.width))return!0}function resetgame(){gameOverBoard.classList.remove("open"),generateBG(),startover.blur(),clearDomClass("asteroid"),lifeCnt=lifeStart,jumpCnt=jumpStart,score=0,newLife=newLifeTarget,ufoAim=ufoAimStart,asteroids=[],beatCnt=1e3,regenerateAsteroids(),addSpaceship(),resetSpaceship(),null!=heartbeat&&clearInterval(heartbeat),1==inPlay&&0==firstRun&&heartBeatSnd(beatCnt)}function generateBG(){1==randomBG&&(gameWrapper.style.cssText="background-image:url(../img/space".concat(Math.floor(getRandomFloat(1,7)),".jpg)"))}function clearDomClass(e){for(var t=document.getElementsByClassName(e);0<t.length;1)document.getElementById(t[0].id).remove()}function clearDomItem(e){var t=document.getElementById(e);null!=t&&t.remove()}function pointCnt(e){score+=e,(newLife-=e)<0&&(lifeCnt++,newLife=newLifeTarget+newLife,playExtraLife())}function playExtraLife(){var e=new Sound("snd/extraShip.ogg");setTimeout(function(){e.play()},1),setTimeout(function(){e.play()},250),setTimeout(function(){e.play()},500)}function moveItem(e,t,s,o){void 0===o&&(o=0);try{null!=e&&(e.style.left="".concat(t,"px"),e.style.top="".concat(s,"px"),e.style.transform="rotate(".concat(o,"deg)"))}catch(e){console.error(e.name),console.error(e.message),console.trace()}}function hideCursor(){1==inPlay&&lifeCnt>0?gameWrapper.classList.add("cursorHide"):gameWrapper.classList.remove("cursorHide")}function setupSounds(){shootSnd=new Sound("snd/fire.mp3"),thrustSnd=new Sound("snd/thrust.mp3"),extraLifeSnd=new Sound("snd/extraShip.ogg"),ufoSnd=new Sound("snd/saucerBig.mp3"),ufoBulletSnd=new Sound("snd/laser.mp3"),ufoBoomSnd=new Sound("snd/bangMedium.mp3"),turnSnd=new Sound("snd/hiss.mp3"),hyperspaceSnd=new Sound("snd/hyperspace.mp3"),hyperspaceFailSnd=new Sound("snd/Power-failure.mp3"),boomSnd=new Sound("snd/boom2.mp3"),astroBoom100Snd=new Sound("snd/bangLarge.mp3"),astroBoom50Snd=new Sound("snd/bangMedium.mp3"),astroBoom25Snd=new Sound("snd/bangSmall.mp3"),saucerBigSnd=new Sound("snd/saucerBig.mp3",!0),saucerSmallSnd=new Sound("snd/saucerSmall.ogg",!0),beat1Snd=new Sound("snd/beat1.ogg"),beat2Snd=new Sound("snd/beat2.ogg")}function modalHandler(e){"open"===e?(modal.classList.add("open"),modalDialog.classList.add("open")):(modal.classList.remove("open"),modalDialog.classList.remove("open"),inPlay=!0,firstRun=!1,dialogCloseBtn.blur(),resetgame())}function heartBeatSnd(e){0==soundless&&(clearInterval(heartbeat),heartbeat=setInterval(function(){beat1Snd.play(),setTimeout(function(){beat2Snd.play()},e)},2*e))}function checkHighScoreCookie(){var e=localStorage.getItem("highScore-asteroids"),t=document.getElementById("highScore").children;""==e||null==e?(localStorage.setItem("highScore-asteroids",score),t[0].innerHTML=score):e<=score?(localStorage.setItem("highScore-asteroids",score),t[0].innerHTML=score):t[0].innerHTML=e}xLimit<414&&(screenScale=1,rockCnt=5,isMobile=!0),document.addEventListener("DOMContentLoaded",function(){setupSounds(),scoreNum=document.getElementById("scoreNum"),versionNum=document.getElementsByClassName("versionNum"),lifeNum=document.getElementById("lifeNum"),HSNum=document.getElementById("HSNum"),gameWrapper=document.getElementById("game__wrapper"),gameOverBoard=document.getElementById("gameOverBoard"),startover=document.getElementById("startover"),dialogCloseBtn.addEventListener("click",function(){modalHandler()});for(var e=0;e<versionNum.length;e++)versionNum[e].innerText=version;resetgame(),xLimit>768&&(inPlay=!1,modalHandler("open"));setInterval(function(){animateScreen()},delta_time)}),lifeCnt>0&&(document.onkeydown=function(e){if(1==inPlay)switch(spaceshipSvg.style.opacity=1,e.keyCode){case 68:turn=2;break;case 65:turn=-2;break;case 87:thrust=1;break;case 83:thrust=-1;break;case 13:startover.blur(),pewpew(),resetGun=!1;break;case 32:hyperspace();break;case 8:case 46:boom()}},document.onkeyup=function(e){switch(e.keyCode){case 65:case 68:turn=0,turnSnd.reset();break;case 87:case 83:thrust=0;break;case 13:resetGun=!0}},document.addEventListener("touchstart",function(e){spaceshipSvg.style.opacity=1;var t=e.target.id;switch(console.log(t),t){case"btnLeft":turn=-1;break;case"btnRight":turn=1;break;case"btnUp":thrust=1;break;case"btnDown":thrust=-1;break;case"btnShoot":pewpew();break;case"btnHS":hyperspace()}}),document.addEventListener("touchend",function(e){switch(e.target.id){case"btnLeft":case"btnRight":turn=0,turnSnd.reset();break;case"btnUp":case"btnDown":thrust=0;break;case"glyphLeft":turn=0;break;case"btnShoot":resetGun=!0}})),window.addEventListener("resize",function(){xLimit=resetWindowLimit("x"),yLimit=resetWindowLimit("y")});